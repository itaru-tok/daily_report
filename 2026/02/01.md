### Q1. 
https://cloud-pratica.com/api/_next/* 
へのリクエストはどのオリジンに振り分けられますか？

#### A.
/api/_next/*はAmplifyに振り分けられる。
（Next.jsのフロントエンド用パスのため）

### Q2.
CloudFrontにHTTPSの証明書を置いた場合、ALBのリスナーはhttpsとhttpどちらが使われますか？理由も添えて選んでください。

- https
- http
- これだけでは決定しない

#### A.
これだけでは決定しない。Cloudfrontのオリジンの設定でhttpかhttpsか指定しないといけないから

### Q3.
CloudFront配下にS3、Amplify、ALB (API) を配置すると以下のURLでアクセスできる。

- S3: https://cloud-pratica.com/static/icon.png
- Amplify: https://cloud-pratica.com/index.html
- ALB (API): https://cloud-pratica.com/api/v1/workspace

この場合、CORSの設定は必要ですか？

必要、不要いずれの場合でもその理由を教えてください。

#### A.
不要。
すべてcloud-pratica.comという同一ホストのため、クロスオリジンにならない。

### Q4. 
以下の設計案が適切か判断し、もし適切ではない場合はどこがおかしいかを説明してください。(それぞれについて適切かどうかを判定するのではなく、3つ合わせた設計に対して評価をしてください)

- dev環境とstg環境のフロントエンドアプリケーションを同一のCloudFrontで管理する
- CloudFront配下には、dev、stg環境それぞれのAmplifyアプリケーションを配置
- stg.cloud-pratica.com へのアクセスは Amplify `cloud-pratica-stg` に流し、dev.cloud-pratica.com へのアクセスは Amplify `cloud-pratica-dev` に流す

#### A.
不適切。
CloudFrontのビヘイビアではHost（devやstg）での振り分けができないため、同一CloudFrontでdevとstgのAmplifyを分けることはできない。

### Q5.
以下の要件を実現するための設計案を書いてください。

- CloudFront配下で複数のフロントエンドアプリーションを構築する
- ドメインは同一とし、パスによりアプリケーションを振り分ける
- `https://cloud-pratica.com/slack-metrics/*` についてはslack metrics専用のAmplifyアプリケーションへ流す
- 同じく、`https://cloud-pratica.com/kirara/*` についてはKIRARA専用のAmplifyアプリケーションへ流す
- それぞれのアプリケーションは別リポジトリで管理し、全てルート(/) へのアクセス前提としてフロントエンドを実装する。(つまり、`/slack-metrics/*` は意識したくない)

#### A.
CloudFrontのビヘイビアで/slack-metrics/*と/kirara/*を分け、それぞれ別のAmplifyオリジンに振り分ける。
CloudFront Functionsでパスを/に書き換えることで、各アプリはルート前提で実装できる。

### Q6.
以下の要件を実現するための設計案を書いてください。

- 静的コンテンツの中で、キャッシュを効かせた方が良いものとキャッシュを効かせるとまずいものが出てきた。
- S3バケットは同居のままとしたい

なお、ビヘイビア、オリジンというキーワードを必ず解答に含めてください。

#### A.
オリジンは同一のS3とし、ビヘイビアを分けてパスごとにキャッシュ設定を変更する。
キャッシュしたいものは長TTL、したくないものは短TTLまたは無効にする。
